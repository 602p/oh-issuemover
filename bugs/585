{"status": "resolved", "priority": "critical", "title": "Roundup's search is unreliable", "milestone": "later", "superceder": "", "nosylist": ["aldeka, paulproteus, pythonian4000"], "assigned": "", "waitingon": "", "keywords": [], "id": "585", "files": [], "history": [{"message": "I believe search is now working properly, thanks to not using the (broken, I \nsuppose) Xapian support.\n   \n", "author": "paulproteus"}, {"message": "I just upgraded to 1.4.20 and reindexed. No improvement.\n\nThen I realized that I could just:\n\n sudo apt-get remove python-xapian\n\nand Roundup will \"downgrade\" to using the database for searches.\n\nMaybe now things will be fine. The search for \"mission\" within the bug tracker \nactually finds more hits now.\n\nI can enable xapian any time anyone asks, if anyone wants to see a demo.\n\nI'd love to get to the root cause, mostly for the benefit of upstream. I think \nwe'll be fine with xapian disabled.\n   \n", "author": "paulproteus"}, {"message": "I don't know if this is the same bug, but there was a bug which broke Roundup\nsearch with Xapian 1.2 - <a href=\"http://issues.roundup-tracker.org/issue2550676\">http://issues.roundup-tracker.org/issue2550676</a> - which\nwas fixed upstream in Roundup v1.4.17. The latest upstream version is 1.4.20,\nand we are on v1.4.15. Might it be worthwhile upgrading?\n   \n", "author": "pythonian4000"}, {"message": "<a href=\"https://www.google.com/search?q=site%3Aopenhatch.org+inurl%3Abugs+mission\">https://www.google.com/search?q=site%3Aopenhatch.org+inurl%3Abugs+mission</a>\n\nOnly *so* useful, but there you go for now...\n   \n", "author": "paulproteus"}, {"message": "Did we ever bring this up with upstream?\n\nAlso: aaaaaaaaaaaugh.\n   \n", "author": "aldeka"}, {"message": "We should bring this up with upstream. Anyway not fixed yet for 0.11.10\n   \n", "author": "paulproteus"}, {"message": "I did try this:\n\n* Remove the Xapian index\n* Reindex\n* Re-do the search\n\nThis did not actually fix the problem.\n\nTherefore this is, as far as I can tell, an issue with upstream Roundup.\n\nIf we want to try digging deeper, we should read the Roundup code and see how\nthey're using Xapian. Maybe there's e.g. some configuration option they set that\nis inappropriate.\n\nThe other next step is to file a bug with upstream's bug tracker, perhaps with a\ncopy of our database or instructions on how to reproduce the problem.\n\nIt'd be nice if there were a command-line test tool that we could use to test if\nsearches find things we expect them to. There's the roundup-admin tool, but per\n<a href=\"http://roundup.sourceforge.net/doc-1.0/user_guide.html\">http://roundup.sourceforge.net/doc-1.0/user_guide.html</a> it doesn't seem to have a\nsearch option.\n   \n", "author": "paulproteus"}, {"message": "So here's what I know about this:\n\n* Roundup uses Xapian to store an index\n\n* There is a command to regenerate the index\n\n* Surprisingly, when you regenerate the index, these searches still fail to find\nthings.\n\nThings to try next:\n\n* Remove the Xapian index\n\n* Reindex\n\n* Re-do the search.\n   \n", "author": "paulproteus"}, {"message": "Just confirmed that <a href=\"issue550\">issue550</a> and <a href=\"issue546\">issue546</a> were also missed in that 'mission'\nsearch. Argh!\n   \n", "author": "aldeka"}, {"message": "Search for 'mission' on the top right. You get taken to\n<a href=\"https://openhatch.org/bugs/issue?%40columns=id%2Cactivity%2Ctitle%2Ccreator%2Cassignedto%2Cstatus%2Cmilestone&amp;%40sort=activity&amp;%40group=priority&amp;%40search_text=mission&amp;submit=Search\">https://openhatch.org/bugs/issue?%40columns=id%2Cactivity%2Ctitle%2Ccreator%2Cassignedto%2Cstatus%2Cmilestone&amp;%40sort=activity&amp;%40group=priority&amp;%40search_text=mission&amp;submit=Search</a>\n\nThis doesn't *actually* have all of the bugs with 'mission' in their title or\nbody text. For instance, (I noticed) <a href=\"issue535\">issue535</a> does not appear. There are\nprobably many others. Unfortunately, because of this problem, I have no way to\ntell how many!\n\nI first noticed this problem in trying to find all of the 'buildhelper' related\nbugs. Several bugs--bugs with 'buildhelper' in the title!--would never appear in\nsearches. I could only access them easily because I was the one who opened them. &gt;.&lt;\n\nWithout reliable, working Roundup search, there's no way to handle and reliably\nprocess the huge volume of bugs in this issue tracker. And it's been bugging me\nfor a long time. Marking as 'critical' for that reason.\n   \n", "author": "aldeka"}]}