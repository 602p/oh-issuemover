{"status": "chatting", "priority": "bug", "title": "Second step of diff/patch mission is too hard and unhelpful", "milestone": "0.12.02", "superceder": "", "nosylist": ["JasonWoof, aldeka, grantbow, paulproteus"], "assigned": "paulproteus", "waitingon": "", "keywords": [], "id": "640", "files": [{"url": "http://openhatch.org/bugs/file505/debug.patch", "author": "JasonWoof"}], "history": [{"message": "--- diffsingle.txt\t2012-05-21 10:03:23.310863048 -0700\n+++ diffsingle-modified.txt\t2012-05-27 18:46:08.976724024 -0700\n@@ -1,3 +1,6 @@\n+Move this sentence to at the start of the file, ensuring that it\n+starts on the first line (remember about the blank lines!).\n+\n This mission is to have you make modifications to a file and submit a\n diff of them. The changes may seem a bit silly, but they will cause the\n diff to contain examples of different types of changes - additions,\n@@ -19,15 +22,11 @@\n \n Read this sentence, and leave it alone.\n \n-Nod your head enthusiastically, and then remove this paragraph\n-(being careful to keep just one blank line between the surrounding paragraphs).\n-\n Take this sentence, and copy it underneath itself (remember the blank line!).\n \n-Move this sentence to at the start of the file, ensuring that it\n-starts on the first line (remember about the blank lines!).\n+Take this sentence, and copy it underneath itself (remember the blank line!).\n \n-There is a typo in this sentence, which oyu should fix.\n+There is a typo in this sentence, which you should fix.\n \n Finally, save your changes in your editor and make a unified diff\n of your changes with the diff command. (If you're not sure how,\n   \n", "author": "carpenterll"}, {"message": "This is pushed, as of <a href=\"https://github.com/openhatch/oh-\">https://github.com/openhatch/oh-</a>\nmainline/commit/121f22612edde70c5684e3db754106c20f49630e\n\nJason, thanks so much!\n   \n", "author": "paulproteus"}, {"message": "Huh, that test (9d0a2cb56c65) passes for me too. I think my line-ending woes are \na separate issue, and should not block this pull request.\n   \n", "author": "JasonWoof"}, {"message": "Jason,\n\nI can't seem to reproduce the problem you've described from within the test \nsuite. Can you take a look at <a href=\"https://github.com/paulproteus/oh-\">https://github.com/paulproteus/oh-</a>\nmainline/commit/9d0a2cb56c65b255bba30cfe3da9ca73ad4f5c1f and see if you agree \nwith my changes there as a way to test this issue?\n\nIf we can't diagnose it quickly, I'd say your problem is a separate (albeit \nfairly critical) bug. I'd like to just get it resolved within this one if \npossible so that it's fixed quickly.\n\nThanks for the review!\n   \n", "author": "paulproteus"}, {"message": "This is intriguing. I will see if I can reproduce this in the test suite, and we \nshould totally add a patch like you described to normalize the input.\n   \n", "author": "paulproteus"}, {"message": "I checked out this branch locally, and I can't pass the mission.\n\nI tried doing the mission again, but got the same message about it not matching. I \ncompared my version to the answer in the source (with diff), and they are the same.\n\nI put some debugging code into oh-mainline, and it appears that when openhatch \napplies my patch, three 0x0d characters are inserted (one just before each of first \nthree 0x0a characters)\n\nMy diff file doesn't have these. But I'm sending my diff by pasting it into a \ntextbox. Maybe my browser (chromium 18.0.1025.168~r134367-1 from debian unstable) \nis sending it with M$-style newlines.\n\nSo if this is indeed the cause, we should sanitize textarea input by converting \nmac/win newlines to unix before doing anything with the text.\n\nIn case you want to see how I got this debug info: attached is the ugly little hack \nI did to find out what two strings python was comparing (that weren't the same.)\n\nI'm out of time for tonight. I should have a little time for testing the next \ncouple days, and more time on the weekend.\n\n         - Jason\n   \n", "author": "JasonWoof"}, {"message": "I've:\n\n* Made the whitespace stuff clearer\n\n* Added instructions about what editor to use\n\n* Added instructions about making sure to save a copy of the original file\n\n* Made the changes simpler\n\n<a href=\"https://github.com/openhatch/oh-mainline/pull/22\">https://github.com/openhatch/oh-mainline/pull/22</a> is the pull request. Review\nrequested!\n   \n", "author": "paulproteus"}, {"message": "Right now, practically everybody fails the second step of the diff/patch mission, because of \nwhitespace errors or misinterpreting one of the instructions. This isn't very pedagogically useful, \nsince people fail for reasons unrelated to their understanding of the material.\n\nWe should do some combination of 1.) make the second step changes simpler, 2.) make the \nassessment script less picky about whitespace errors, and/or 3.) give the user more helpful error \nmessages, with a diff or line number to tell them where their submission is breaking.\n   \n", "author": "aldeka"}]}