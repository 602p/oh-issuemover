{"status": "resolved", "priority": "wish", "title": "In creating a new project, \"Save and publish\" button should rate limit", "milestone": "0.11.06", "superceder": "", "nosylist": ["foxfirefey, palhmbs, paulproteus"], "assigned": "palhmbs", "waitingon": "", "keywords": ["bitesize, javascript, performance, usability"], "id": "369", "files": [{"url": "http://openhatch.org/bugs/file349/0001-create-project3.patch", "author": "palhmbs"}], "history": [{"message": "The updated patch here is great.\n\nPaul, thanks for your patience, and sorry that it took me a week (!! eek) to\nreview this.\n\nI've pushed it to origin/master, and am deploying it now.\n   \n", "author": "paulproteus"}, {"message": "Fixed - The only issue I have is when the person re-saves any changes after the\nproject has been added it doesn't hide the Save link.\n\nBut it saves it so quickly I'm loathe to try harder to fix it as I haven't\ntotally got my head around how the show/hide stuff currently works.\n\nAnyway - please review!\n   \n", "author": "palhmbs"}, {"message": "Some feedback:\n\n* You introduce end-of-line whitespace. Try not to do that in the future.\n\n* Good job citing your source on the ajaxload.info image. The images there do\nlook okay for use.\n\n* This commit creates a bug, so I can't merge it yet.\n\nThe following behavior works on the live site:\n\n* Go to /+portfolio/editor/\n* Click \"Add a project\"\n* See a new little project box appear\n* Enter a project name in, and hit save\n* Click \"Add a project\"\n* Type a project name in, and hit Save\n\nWith your patch, \"Save\" is missing the second time. I think you're\nhiding/deleting too many elements in jQuery.\n\nOther than the bug, I like what you've done! Marking \"in-progress\" for now.\n   \n", "author": "paulproteus"}, {"message": "Well, I hope this is a comprehensive fix (and passes review)!\n\nCheers, Paul.\n   \n", "author": "palhmbs"}, {"message": "I like the Roundup style and the new suggestion by palhmbs. What about doing both \nof them?\n   \n", "author": "paulproteus"}, {"message": "bump.\n   \n", "author": "palhmbs"}, {"message": "I've looked into this further, and it may be as simple as giving the user some\nfeedback back quickly first.\n\nin the file mysite/static/js/importer.js\n\nin the function: PortfolioEntry.Save.save....\n\nAdding...\nNotifier.displayMessage('Saving, please wait!');\n\nShould give the user a message quickly that should help them to know somethings\nup and that they do in-fact need to be patient!!\n\nWhat do you think?\n   \n", "author": "palhmbs"}, {"message": "Looking at oh_roundup it uses: in the &lt;form&gt; an onsubmit=\"return submit_once()\"\n\nand the javascript function is:\n\nsubmitted = false;\n\nfunction submit_once() {\nif (submitted) {\nalert(\"Your request is being processed.\\nPlease be patient.\");\nevent.returnValue = 0; // work-around for IE\nreturn 0;\n}\nsubmitted = true;\nreturn 1;\n} \n\nSo this should be real easy to implement.\n   \n", "author": "palhmbs"}, {"message": "jQuery - woot!\n   \n", "author": "palhmbs"}, {"message": "This is a pretty important usability bug, and it requires some JavaScript coding\nability.\n\nLet us know on this ticket if you want to try to fix it. I think that one\nreasonable way to do it is to give the submit button a HTML attribute that\nindicates that it is working, and then clears that HTML attribute when the\nserver responds indicating that the \"Save\" worked. Maybe you could use jQuery's\naddClass() method for that.\n\n(For what it's worth: Roundup has some functionality very much like this. When\nyou go to edit a bug and click \"Submit changes\" twice in a row, Roundup tells\nyou to just be patient! So you could read that source code for inspiration.)\n   \n", "author": "paulproteus"}, {"message": "I just tried creating a new project and there was a huge latency (over 30\nseconds) that made me wonder if I had actually clicked the button right.  By the\ntime the requests had succeeded, I found out I had actually created 5 new\nprojects, instead of just one!  I believe there should be a way where, upon\nclicking, the \"save and publish\" button is disabled as an indicator that the\nsave is processing, and then only becomes re-enabled upon failure (or changed to\nthe plain Save after success).\n   \n", "author": "foxfirefey"}]}