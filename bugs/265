{"status": "resolved", "priority": "feature", "title": "Integrate Django and MediaWiki authentication", "milestone": "0.11.02", "superceder": "", "nosylist": ["paulproteus, pythonian4000"], "assigned": "pythonian4000", "waitingon": "", "keywords": [], "id": "265", "files": [], "history": [{"message": "This works and is so awesome and you should email Devel@ about it, and you\nshould write a blog post and it's so awesome totally great oh my gosh.\n   \n", "author": "paulproteus"}, {"message": "One bug:\n\nAfter I log out, I get to:\n\n\n<a href=\"https://openhatch.org/wiki/Special:UserLogout\">https://openhatch.org/wiki/Special:UserLogout</a>\n\nWhen I click on \"Log in\" in the upper-right corner, it sends me to:\n\n<a href=\"https://openhatch.org/w/index.php?title=Special:UserLogin&amp;returnto=Special:UserLogout\">https://openhatch.org/w/index.php?title=Special:UserLogin&amp;returnto=Special:UserLogout</a>\n\nand then when the Django code passes us back to the wiki, MediaWiki immediately\nlogs me back out.\n   \n", "author": "paulproteus"}, {"message": "Jack -- I've got the usernames all configured the way I want. Thanks for sending\nme an email with the few usernames that still needed work.\n\nAnd, after I run \"maintenance/update.php\" it works *great*.\n   \n", "author": "paulproteus"}, {"message": "As per\n<a href=\"http://irclogs.jackgrigg.com/irc.freenode.net/openhatch/2011-02-14#i_2538286\">http://irclogs.jackgrigg.com/irc.freenode.net/openhatch/2011-02-14#i_2538286</a> and\nonwards, the MediaWiki AuthDjango extension\n(<a href=\"https://bitbucket.org/pythonian4000/django-mediawiki-authentication-by-user-id/src\">https://bitbucket.org/pythonian4000/django-mediawiki-authentication-by-user-id/src</a>)\nis ready to ship. the only remaining issue is that there are a number of\nMediaWiki users that do not have corresponding Django usernames. Once a decision\nis made over these (spam accounts deleted, other accounts secured or notified or\nleft etc.) then the extension will be activated and this feature will be done! ^_^\n   \n", "author": "pythonian4000"}, {"message": "Right, here is a patch that adds the Django side of things:\n\n<a href=\"http://git.jackgrigg.com/openhatch/patch/?id=21051ac0603f64481503783929e116e413f8cca8\">http://git.jackgrigg.com/openhatch/patch/?id=21051ac0603f64481503783929e116e413f8cca8</a>\n   \n", "author": "pythonian4000"}, {"message": "I have added a site notice to the wiki (\n<a href=\"http://openhatch.org/wiki/MediaWiki:Sitenotice\">http://openhatch.org/wiki/MediaWiki:Sitenotice</a> ) that informs the users of the\npending change and to request a username change if needed.\n\nOn that note, links below are to MediaWiki extensions that allow user renaming\nand merging, which we will need to add if any users require it:\n<a href=\"http://www.mediawiki.org/wiki/Extension:Renameuser\">http://www.mediawiki.org/wiki/Extension:Renameuser</a>\n<a href=\"http://www.mediawiki.org/wiki/Extension:User_Merge_and_Delete\">http://www.mediawiki.org/wiki/Extension:User_Merge_and_Delete</a>\n   \n", "author": "pythonian4000"}, {"message": "If we can use MySQL permissions so that it only needs access to the User \ntable (or some other subset of the database), that would be okay with me.\n   \n", "author": "paulproteus"}, {"message": "This issue is being tracked in <a href=\"https://openhatch.org/bugs/issue264\">https://openhatch.org/bugs/issue264</a>\n\nAlso see there for the missing discussion link from below ~_~\n   \n", "author": "pythonian4000"}, {"message": "This needs doing, and there is already a framework for it:\n<a href=\"https://bitbucket.org/toml/django-mediawiki-authentication/src\">https://bitbucket.org/toml/django-mediawiki-authentication/src</a>\n\nHowever this requires that MediaWiki be allowed to access the Django database,\nwhich is not so good with our setup - see discussion starting at &lt;&gt;\n\nThis needs thought.\n   \n", "author": "pythonian4000"}]}