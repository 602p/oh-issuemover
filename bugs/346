{"status": "resolved", "priority": "bug", "title": "Trac bug importer crashes", "milestone": "0.11.03", "superceder": "", "nosylist": ["nacarino, paulproteus, pythonian4000"], "assigned": "paulproteus", "waitingon": "", "keywords": [], "id": "346", "files": [], "history": [{"message": "<a href=\"http://gitorious.org/openhatch/oh-mainline/commit/be685eeee2bcc72d97e36768c4b9741a97a903b7\">http://gitorious.org/openhatch/oh-mainline/commit/be685eeee2bcc72d97e36768c4b9741a97a903b7</a>\nfixes this. Deployed.\n   \n", "author": "paulproteus"}, {"message": "I'm going to take a look at this, mostly so I can end the \"MetaPage\" CRITICAL\nNagios emails.\n   \n", "author": "paulproteus"}, {"message": "In case you feel like looking into this, here's the deal:\n\n* The way we get this exception is by running the \"customs_daily_tasks\"\nmanagement command.\n\n* Trac is a bug tracker type, but it's also a specific bug tracker.\n<a href=\"http://trac.edgewall.org/ticket/3275\">http://trac.edgewall.org/ticket/3275</a> seems to be the one it had trouble with.\n\n* I'm rerunning the server's \"customs_daily_tasks\" task, just in case it's a\ntransient error. If it succeeds I'll update this bug and mark it resolved.\nProbably it will fail in the same way.\n   \n", "author": "paulproteus"}, {"message": "Right now, the Trac import code is hitting an unhandled exception.\n\nThis exception is preventing the bug import code from finishing.\n\n2011-03-22 08:37:40,285 refresh_one_bug_id:369 INFO     [Trac] Refreshing bug\n3275 from project named Trac.\nTraceback (most recent call last):\n  File \"./bin/production\", line 81, in &lt;module&gt;\n    djangorecipe.manage.main('mysite.deployment_settings')\n  File\n\"/home/deploy/milestone-a/eggs/djangorecipe-0.20-py2.6.egg/djangorecipe/manage.py\",\nline 16, in main\n    management.execute_manager(mod)\n  File\n\"/home/deploy/milestone-a/parts/production/django/core/management/__init__.py\",\nline 362, in execute_manager\n    utility.execute()\n  File\n\"/home/deploy/milestone-a/parts/production/django/core/management/__init__.py\",\nline 303, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File\n\"/home/deploy/milestone-a/parts/production/django/core/management/base.py\", line\n195, in run_from_argv\n    self.execute(*args, **options.__dict__)\n  File\n\"/home/deploy/milestone-a/parts/production/django/core/management/base.py\", line\n222, in execute\n    output = self.handle(*args, **options)\n  File\n\"/home/deploy/milestone-a/mysite/customs/management/commands/customs_daily_tasks.py\",\nline 218, in handle\n    cdt_fns[key]()\n  File\n\"/home/deploy/milestone-a/mysite/customs/management/commands/customs_daily_tasks.py\",\nline 112, in find_and_update_enabled_trac_instances\n    instantiated.update()\n  File \"/home/deploy/milestone-a/mysite/customs/bugtrackers/trac.py\", line 338,\nin update\n    self.refresh_one_bug_id(bug_id)\n  File \"/home/deploy/milestone-a/mysite/customs/bugtrackers/trac.py\", line 375,\nin refresh_one_bug_id\n    data = tb.as_data_dict_for_bug_object(self.extract_tracker_specific_data,\nself.old_trac)\n  File \"/home/deploy/milestone-a/mysite/customs/bugtrackers/trac.py\", line 205,\nin as_data_dict_for_bug_object\n    ret['date_reported'] = TracBug.page2date_opened(html_data)\n  File \"/home/deploy/milestone-a/mysite/customs/bugtrackers/trac.py\", line 71,\nin page2date_opened\n    return TracBug._span2date(span)\n  File \"/home/deploy/milestone-a/mysite/customs/bugtrackers/trac.py\", line 87,\nin _span2date\n    return mysite.base.helpers.string2naive_datetime(date_string)\n  File \"/home/deploy/milestone-a/mysite/base/helpers.py\", line 71, in\nstring2naive_datetime\n    time_zoned = dateutil.parser.parse(s)\n  File\n\"/home/deploy/milestone-a/eggs/python_dateutil-1.5-py2.6.egg/dateutil/parser.py\", line\n697, in parse\n    return DEFAULTPARSER.parse(timestr, **kwargs)\n  File\n\"/home/deploy/milestone-a/eggs/python_dateutil-1.5-py2.6.egg/dateutil/parser.py\", line\n303, in parse\n    raise ValueError, \"unknown string format\"\nValueError: unknown string format\n   \n", "author": "paulproteus"}]}