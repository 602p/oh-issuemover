{"status": "resolved", "priority": "urgent", "title": "Some OpenID signins (e.g., from wordpress.com) hit Unicode-esque exceptions", "milestone": "0.11.03", "superceder": "", "nosylist": ["cyraxjoe, paulproteus"], "assigned": "cyraxjoe", "waitingon": "", "keywords": [], "id": "324", "files": [{"url": "http://openhatch.org/bugs/file190/0001-Changing-dependency-of-python-openid-to-a-corrected-.patch", "author": "cyraxjoe"}, {"url": "http://openhatch.org/bugs/file159/michoopenidpatch.patch", "author": "cyraxjoe"}, {"url": "http://openhatch.org/bugs/file183/python-openid-2.2.5-openhatch1.tar.gz", "author": "cyraxjoe"}], "history": [{"message": "This is deployed and fixed. Thanks so much!\n   \n", "author": "paulproteus"}, {"message": "New patch with git format-patch\n   \n", "author": "cyraxjoe"}, {"message": "Some last things you need to do:\n\n0. Take a look at <a href=\"http://openhatch.org/wiki/How_we_handle_patches\">http://openhatch.org/wiki/How_we_handle_patches</a>\n\n1. Make a local commit, and use \"git format-patch\" to turn that patch into a file.\n\nThat way, we get a commit log message, and you're the \"Author\".\n\n2. Email Devel saying that you're okay with us using your work under AGPLv3 (or\nlater, if you like)\n\ne.g. <a href=\"http://lists.openhatch.org/pipermail/devel/2011-March/001802.html\">http://lists.openhatch.org/pipermail/devel/2011-March/001802.html</a>\n\nTake care of the above, and we'll deploy this. I just tested it, and indeed this\ndoes fix the problem. Thanks for this great patch!\n   \n", "author": "paulproteus"}, {"message": "By the way, I can confirm the new package fix this error.\n   \n", "author": "cyraxjoe"}, {"message": "setup.py patch with the new dependency\n   \n", "author": "cyraxjoe"}, {"message": "New python-openid package with the modifications in\n<a href=\"https://github.com/openid/python-openid/pull/13\">https://github.com/openid/python-openid/pull/13</a>\n   \n", "author": "cyraxjoe"}, {"message": "The next step here is too make a tarball of the python-openid code with the\nupdates in that pull request. Then update our setup.py to point at that version,\nand run:\n\n ./bin/buildout\n\nand watch to see if it gets the new version (that you tarball'd up) of\npython-openid.\n\nIf so, and if that makes this error go away, then I will happily copy that\ntarball to <a href=\"http://linode.openhatch.org/~paulproteus/\">http://linode.openhatch.org/~paulproteus/</a> and merge a patch to\nsetup.py! That would close this bug.\n   \n", "author": "paulproteus"}, {"message": "I've checking this, and I found this -&gt;\n<a href=\"https://github.com/openid/python-openid/pull/13\">https://github.com/openid/python-openid/pull/13</a> which is the 'formal' possible\nfix to this trouble, meanwhile I make a little patch to fix this (nothing big as\nthe patch at github), encoding to unicode all the strings that it reads from the\nStrinIO buffer (it's more like a work around in some sort of way...).\n   \n", "author": "cyraxjoe"}, {"message": "I can't reproduce this with the Kermit page, but I can with:\n<a href=\"http://unhammer.wordpress.com\">http://unhammer.wordpress.com</a>\n   \n", "author": "paulproteus"}, {"message": "It's sad when people can't log in. Let's fix this.\n   \n", "author": "paulproteus"}, {"message": "A user tried to sign in with an OpenID web page that has UTF-8 characters in it. \n\nTo reproduce:\n\nSend a POST to /openid/signin/ with this data:\n\nPOST: {'action': 'verify', 'openid_url':\n'<a href=\"http://www.columbia.edu/kermit/utf8.html\">http://www.columbia.edu/kermit/utf8.html</a>', 'next': ''}\n\n(You can use any utf-8 page, I think.)\n\nNext step: See if someone can reproduce this bug, hopefully with an automated test.\n   \n", "author": "paulproteus"}]}