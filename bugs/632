{"status": "resolved", "priority": "critical", "title": "OpenHatch web server is double-compressing tar.gz files", "milestone": "0.12.02", "superceder": "", "nosylist": ["aldeka, cmbryan, jesstess, paulproteus"], "assigned": "paulproteus", "waitingon": "", "keywords": [], "id": "632", "files": [{"url": "http://openhatch.org/bugs/file460/unnamed", "author": "pythonian4000"}], "history": [{"message": "Yep, all good here too!\n   \n", "author": "cmbryan"}, {"message": "The problem here was that our Apache configuration was explicitly adding the\nDEFLATE OutputFilter. This isn't actually a reasonable thing to do; nginx, the\nfront-end web server, now handles compression for us.\n   \n", "author": "paulproteus"}, {"message": "Hey cmbryan -- I just adjusted our Apache configuration. Can you please give it\na fresh shot?\n\nI did test the fix, but I want you to test it too, so that I can be double-sure\nit's addressed.\n   \n", "author": "paulproteus"}, {"message": "Hi cmbryan,\nI can't reproduce the problem you're having with wget. This works fine:\n\n wget <a href=\"https://openhatch.org/missions/tar/ghello-0.4.tar.gz\">https://openhatch.org/missions/tar/ghello-0.4.tar.gz</a>\n tar xvzf ghello-0.4.tar.gz\n\nBUT I *can* reproduce the problem by clicking on the ghello-0.4.tar.gz link in\nmy web browser! I'll now see what I can do address the issue.\n   \n", "author": "paulproteus"}, {"message": "If you add the -z flag to the tar command, it calls gzip / gunzip as\nrequired.\nOn 8/02/2012 10:48 AM, \"cmbryan\" &lt;<a href=\"mailto:bugs@openhatch.org\">bugs@openhatch.org</a>&gt; wrote:\n\n&gt;\n&gt; cmbryan &lt;<a href=\"mailto:chrismbryan@gmail.com\">chrismbryan@gmail.com</a>&gt; added the comment:\n&gt;\n&gt; Hi again, found a solution by running 'gunzip' on the archive, followed by\n&gt; the\n&gt; usual tar. Surely this should be included in the hints?\n&gt;\n&gt; ----------\n&gt; status: reopened -&gt; need-review\n&gt;\n&gt; __________________________________________\n&gt; Roundup issue tracker &lt;<a href=\"mailto:bugs@openhatch.org\">bugs@openhatch.org</a>&gt;\n&gt; &lt;<a href=\"https://openhatch.org/bugs/issue632\">https://openhatch.org/bugs/issue632</a>&gt;\n&gt; __________________________________________\n&gt; _______________________________________________\n&gt; Devel mailing list\n&gt; <a href=\"mailto:Devel@lists.openhatch.org\">Devel@lists.openhatch.org</a>\n&gt; <a href=\"http://lists.openhatch.org/mailman/listinfo/devel\">http://lists.openhatch.org/mailman/listinfo/devel</a>\n&gt;\n   \n", "author": "pythonian4000"}, {"message": "Fundamentally that's a bug with the mission that you're working around. \nI'll see if I can fix the web server so this problem goes away shortly!\n\n-- Asheesh.\n   \n", "author": "paulproteus"}, {"message": "Hi again, found a solution by running 'gunzip' on the archive, followed by the \nusual tar. Surely this should be included in the hints?\n   \n", "author": "cmbryan"}, {"message": "Hi, I'm still unable to unpack: tar xvzf ghello-0.4.tar.gz gives:\n\ntar: This does not look like a tar archive\ntar: Skipping to next header\ntar: Exiting with failure status due to previous errors\n\nFeeling like a noob, I've certainly worked with tarballs enough! ;)\n   \n", "author": "cmbryan"}, {"message": "I just rebased this branch, merged it, deployed it, and afterward changed \"tar\nxvfz\" to \"tar xvzf\" because of a personal preference.\n\nYay! Thanks Karen and Jessica for finding and fixing these issues.\n   \n", "author": "paulproteus"}, {"message": "Branch jesstess has a commit series for this ticket that:\n\n1. Adjusts the unpack hint\n2. Fixes the upload issues on reset tar missions\n3. Adds tests for completing reset tar missions\n\nI tested the changes manually and ran the test suite.\n   \n", "author": "jesstess4"}, {"message": "For (2) and (3), it looks like the issue only exists when you reset the mission section after having \nalready completed it.\n   \n", "author": "jesstess"}, {"message": "1. tar zxvf ghello-0.4.tar.gz, not tar xvf, works on Mac. We should update our hint to reflect that.\n   \n", "author": "aldeka"}, {"message": "I tested out the tar mission on the live site as part of my pedagogy audit. Every step of the mission \nwas broken, on my Mac at least. I'll have to try to duplicate on Linux later...\n\n1. I downloaded the provided tarball and attempted to open it from the command line. No matter \nwhat I tried, the command line tar utility gave me a \"This does not look like a tar archive\" error. \nEven renaming the file didn't help. I eventually double-clicked the tarball using the GUI and was \nable to unpackage the tarball that way, but that's just silly.\n\n2. I tried to upload ghello.c. Hitting the upload button apparently did nothing -- the page simply \nreloaded/reset. Either something was wrong with my file (in which case, the lack of any error \nmessage at all is a big problem), or the uploader is just completely busted.\n\n3. I tried to upload myproject-0.1.tar.gz as part of the second half of the mission. It also failed to \nupload, the same way as ghello.c before it.\n\nPedagogy audit FAIL.\n   \n", "author": "aldeka"}]}