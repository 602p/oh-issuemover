{"status": "resolved", "priority": "bug", "title": "Latest snapshots fail to import", "milestone": "0.12.02", "superceder": "", "nosylist": ["jacquiesue, paulproteus, walkerh"], "assigned": "walkerh", "waitingon": "", "keywords": [], "id": "662", "files": [{"url": "http://openhatch.org/bugs/file486/0001-Fix-hard-tabs-in-test-code.patch", "author": "walkerh"}, {"url": "http://openhatch.org/bugs/file487/0002-Add-small-static-json-snapshots-for-testing.patch", "author": "walkerh"}, {"url": "http://openhatch.org/bugs/file488/0003-Add-test-methods-to-exercise-snapshot-files.patch", "author": "walkerh"}, {"url": "http://openhatch.org/bugs/file489/0004-Fix-post_save-hook-for-Users-to-suppress-creating-Pe.patch", "author": "walkerh"}, {"url": "http://openhatch.org/bugs/file493/0005-Replace-now-broken-LoginWinOpenID-test-with-ProfileG.patch", "author": "walkerh"}], "history": [{"message": "I can verify that:\n\n* These patches are already included in oh-mainline\n\n* The latest snapshot does seem to import okay.\n\nWith that, I'm closing this and marking it as such. Thanks to Walker for doing \nthe digging and patching!\n   \n", "author": "paulproteus"}, {"message": "Patch 0005 fixes the broken test, which was logically incorrect. (The test used a fixture that should \nnow be considered broken.)\n\nIMO, the test is still logically incorrect. I do not believe it is truly exercising the OpenID use case.\n   \n", "author": "walkerh"}, {"message": "Actually this test breaks the build. Walker is investigating.\n   \n", "author": "paulproteus"}, {"message": "walkerh's patches fix this, and they're shipped!\n   \n", "author": "paulproteus"}, {"message": "Done.\n\nHopefully this is the last time someone submits bug fixes as attached patch files.\n   \n", "author": "walkerh"}, {"message": "New patch queue on the way that improves the test cases and fixes the bug.\n   \n", "author": "walkerh"}, {"message": "Expressed bug as a failing test and two passing tests.\n   \n", "author": "walkerh"}, {"message": "Test snaphots that expose the bug. All three versions should be loadable, but the last one crashes.\n   \n", "author": "walkerh"}, {"message": "Further information, perhaps relevant:\n\nThe git commit 63934f24b1d59994cb3e46d6c4c2c0bd11f8d525 introduces a problem\nwhere our snapshots do not import using MySQL.\n\nWe should add a Hudson check that tests if the latest nightly snapshot works;\nmoreover, though, we need to fix the snapshots to work properly on both\nsupported databases.\n   \n", "author": "paulproteus"}, {"message": "Thanks for reporting this. I've fixed the underlying problem, which is that the\nscript that generated the snapshots was broken by the switch away from \"buildout\".\n\nI've fixed it, in that the snapshots get generated. However, there is something\nodd going on during the import phase, and I don't know what it is.\n\nTherefore, marking as in-progress.\n   \n", "author": "paulproteus"}, {"message": "I was following the 'Importing a data snapshot' wiki page and went to\n<a href=\"http://inside.openhatch.org/snapshots/\">http://inside.openhatch.org/snapshots/</a> to download my first snapshot and I\nstarted getting errors during the loaddata step. After hopping on IRC, Asheesh\nhelped me to realize that the snapshot was size 0. \n\nSubmitting a new issue to fix the snapshots.\n   \n", "author": "jacquiesue"}]}