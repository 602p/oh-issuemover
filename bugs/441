{"status": "resolved", "priority": "urgent", "title": "Issues with buildout", "milestone": "0.11.07", "superceder": "", "nosylist": ["kracekumar, palhmbs, paulproteus"], "assigned": "paulproteus", "waitingon": "", "keywords": ["this-would-rock"], "id": "441", "files": [{"url": "http://openhatch.org/bugs/file330/buildout_error.txt", "author": "kracekumar"}, {"url": "http://openhatch.org/bugs/file353/unnamed", "author": "kracekumar"}, {"url": "http://openhatch.org/bugs/file381/unnamed", "author": "kracekumar"}, {"url": "http://openhatch.org/bugs/file382/unnamed", "author": "kracekumar"}, {"url": "http://openhatch.org/bugs/file383/unnamed", "author": "kracekumar"}, {"url": "http://openhatch.org/bugs/file384/unnamed", "author": "kracekumar"}, {"url": "http://openhatch.org/bugs/file386/unnamed", "author": "kracekumar"}], "history": [{"message": "This was fixed, for what it's worth, by forcefully using \"distribute\" not\n\"setuptools\" in the buildout process. See also\n\n*\n<a href=\"https://gitorious.org/openhatch/oh-mainline/commit/d06d05135d5646e585191cd6f30448da8497731e\">https://gitorious.org/openhatch/oh-mainline/commit/d06d05135d5646e585191cd6f30448da8497731e</a>\n\n*\n<a href=\"https://gitorious.org/openhatch/oh-mainline/commit/5456563a6f248100458adcd72b435a4ba6a3f15c\">https://gitorious.org/openhatch/oh-mainline/commit/5456563a6f248100458adcd72b435a4ba6a3f15c</a>\n\n*\n<a href=\"https://gitorious.org/openhatch/oh-mainline/commit/5ae639ffc69b020306148eb739574d4756c57d61\">https://gitorious.org/openhatch/oh-mainline/commit/5ae639ffc69b020306148eb739574d4756c57d61</a>\n   \n", "author": "paulproteus"}, {"message": "kracekumar, and anyone else having problems:\n\nI want you to test running buildout, with the instructions from the regular\nREADME.md file, on the latest code on origin/master.\n\nI think I have fixed this there. I'll mark it resolved, since I tested it in my\nUbuntu Lucid VM and it works there, but do let the bug know what you find.\n   \n", "author": "paulproteus"}, {"message": "I've confirmed by my own testing that the virtualenv-based setup works where \nbuildout did not. That is *great* news. kracekumar, I'd appreciate if you could \ntest that, but if not I will mark it resolved at the end of August anyway.\n\nThere are a separate set of bugs for migrating OpenHatch's codebase to use \nvirtualenv for everyone. Those will be tackled in the future.\n   \n", "author": "paulproteus"}, {"message": "In the instructions, we ask you to 'sudo apt-get install \npython-virtualenv'\n\nMake sure you read README.virtualenv.mkd\n\nOnce you have it installed, that file should say what is next\n   \n", "author": "paulproteus"}, {"message": "<a href=\"mailto:kracekumar@python-lover\">kracekumar@python-lover</a>:~/codes/python/web/oh-mainline$ git fetch\n<a href=\"mailto:kracekumar@python-lover\">kracekumar@python-lover</a>:~/codes/python/web/oh-mainline$ git rebase\norigin/no_buildout\nCannot rebase: You have unstaged changes.\nPlease commit or stash them.\n<a href=\"mailto:kracekumar@python-lover\">kracekumar@python-lover</a>:~/codes/python/web/oh-mainline$\n<a href=\"mailto:kracekumar@python-lover\">kracekumar@python-lover</a>:~/codes/python/web/oh-mainline$ ls\n504.html      CREDITS    puppet-provisioning-files  setup.py\nbootstrap.py  downloads  README.mkd                 Vagrantfile\nbootstrap.sh  LAYOUT     README.virtualenv.mkd\nbuildout.cfg  LICENSE    run_importer.sh\ncoveragerc    mysite     setup.cfg\n\nI think i have messed up the directorie.I can't find bin directory, I don't\nhave virtualenv, should I start from first ?\n   \n", "author": "kracekumar"}, {"message": "Okay, kracekumar, thanks for your patience.\n\nI've tested this on an Ubuntu 10.04 virtual machine, and I updated \nREADME.virtualenv.mkd so that it should be complete.\n\nWould you be willing to test by:\n\n0. Updating your repo (git fetch ; git rebase origin/no_buildout)\n\n1. Erasing all files not in version control (git clean -f -x -d)\n\n2. Reading README.virtualenv.mkd and following the new instructions there\n\nLet me know if that gives you a working server! I think it should.\n   \n", "author": "paulproteus"}, {"message": "It's odd that a few of those dependencies didn't download, even though they're \nlisted in setup.py. Those three that you had to 'pip install' are all in \nsetup.py.\n\nCan you try doing this fresh?\n\n1) git clean -f -d -x # NOTE: This will remove all unversioned files from the oh-\nmainline repository. It will be like you have a fresh checkout.\n\n2) git fetch\n\n3) git rebase origin/no_buildout\n\n4) Follow the instructions in README.virtualenv.mkd\n\nHopefully you won't get those dependency errors this time.\n\nAlso, if you'd try to save the output of 'python setup.py develop' that might be \nhelpful.\n\nI'd say we're about 92% of the way to the end. I'll also try testing this in a VM \nshortly. What operating system are you running?\n   \n", "author": "paulproteus"}, {"message": "Much Closer :)\n\nI did\n\n<a href=\"mailto:kracekumar@python-lover\">kracekumar@python-lover</a>:~/codes/python/web/oh-mainline/mysite$ cd ../\n<a href=\"mailto:kracekumar@python-lover\">kracekumar@python-lover</a>:~/codes/python/web/oh-mainline$ ./bin/python\nPython 2.7.1+ (r271:86832, Apr 11 2011, 18:05:24)\n[GCC 4.5.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import django\n&gt;&gt;&gt; import mysite.settings\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"mysite/settings.py\", line 264, in &lt;module&gt;\n    import djcelery\nImportError:\n\nSo I went on to do *pip install django-celery* , found in github and next\nerror was *Error: No module named ghettoq *and *followed pip install ghettoq\n*, then things seemed ok.Final Error message is\n*django.core.cache.backends.base.InvalidCacheBackendError:\nMemcached cache backend requires either the 'memcache' or 'cmemcache'\nlibrary*\n\nHere is complete commands executed and output.\n\n<a href=\"https://gist.github.com/1157682\">https://gist.github.com/1157682</a>\n\nSorry for alternative using pocoo and gist, I had some bad gateway interface\nwith paste this time.\n   \n", "author": "kracekumar"}, {"message": "Getting better!\n\nTry this:\n\n     cd .. # out of the mysite directory, into oh-mainline\n     ./bin/python # you should see a Python prompt\n\nInside the Python prompt:\n\n     import django # just make sure this works without error\n     import mysite.settings\n\nProbably the last line will give you an error. What error?\n\nBTW we are getting extremely closer; thank you for trying all this. \nI'll update README.virtualenv.md with what I learn based on this \nconversation.\n\n-- Asheesh.\n   \n", "author": "paulproteus"}, {"message": "Some funny error this time. `Settings.py` not found.\n<a href=\"http://paste.pocoo.org/show/460905/\">http://paste.pocoo.org/show/460905/</a>\n   \n", "author": "kracekumar"}, {"message": "Great, kracekumar! Does that mean you saw a bunch of scrolling text about \ndownloading the various dependencies?\n\nWith these changes, you shouldn't need to use buildout at all. If the 'setup.py \ndevelop' process downloaded a lot of stuff, you should be able to run the \nOpenHatch app with:\n\n $ cd mysite\n $ python manage.py runserver\n \nI just made some fresh changes to the no_buildout branch, so if the above fails \nfor you, try:\n\n $ git fetch\n $ git rebase origin/no_buildout\n\nand then try the 'python manage.py runserver' command again.\n   \n", "author": "paulproteus"}, {"message": "I followed the steps mentioned in previous mail and now I was able to move\nfew more steps.This time some problem with zc.\n\n<a href=\"http://paste.pocoo.org/show/460903/\">http://paste.pocoo.org/show/460903/</a>\n   \n", "author": "kracekumar"}, {"message": "One more thing, kracekumar:\n\nI want you to try recreating the virtualenv with this command:\n\n $ virtualenv --clear --distribute $PWD\n\n(\"--clear\" makes it re-create it. \"--distribute\" makes it use a different \ninstaller tool.)\n\nThen try the 'python setup.py develop' thing again, and let me know if it works \nthis time.\n   \n", "author": "paulproteus"}, {"message": "kracekumar,\n\nThat's a very helpful error message, as things go. Thank you. It suggests that \neven with 'setup.py develop', your system can't download the files it needs.\n\nCan you try this command:\n\n $ wget <a href=\"http://linode.openhatch.org/~paulproteus/\">http://linode.openhatch.org/~paulproteus/</a> -O- | grep kombu | wc -l\n\nFor me, it outputs the number \"5\", because there are 5 lines in that web page \nthat match kombu.\n\nThat will tell me if your computer can download things from the linode in \ngeneral.\n   \n", "author": "paulproteus"}, {"message": "Hey, I was out openhatch irc for almost one month or more than that.I tried\nabove mentioned steps but it breaks, I can't fix the error since I am not\ndjango dev.\n\n<a href=\"https://gist.github.com/1157273\">https://gist.github.com/1157273</a>\n   \n", "author": "kracekumar"}, {"message": "paulhmbs and kracekumar,\n\n<a href=\"http://lists.openhatch.org/pipermail/devel/2011-August/002289.html\">http://lists.openhatch.org/pipermail/devel/2011-August/002289.html</a>\n\nWould one of you see if that helps? kracekumar in particular, since you can \nreproduce the failure.\n   \n", "author": "paulproteus"}, {"message": "Hello\n I tried as per suggest it in wiki still have an issue.here is error message\nlink.<a href=\"https://gist.github.com/1033993\">https://gist.github.com/1033993</a>\n   \n", "author": "kracekumar"}, {"message": "To elaborate, the suggested fix for this was using a virtualenv wrapper, we\nedited the wiki to give more instructions on how to do that --\n<a href=\"http://openhatch.org/w/index.php?title=Getting_started_with_the_OpenHatch_code&amp;action=edit&amp;section=4\">http://openhatch.org/w/index.php?title=Getting_started_with_the_OpenHatch_code&amp;action=edit&amp;section=4</a>\n\nUnfortunately the current method outlined isn't repeatable, at least not by me.\n   \n", "author": "palhmbs"}, {"message": "I had downloaded openhatch source code and tried to install.$python bootstrap.py\nran successful and ./bin/buildout didn't run properly.I have attached the error\nmessage.\n   \n", "author": "kracekumar"}]}