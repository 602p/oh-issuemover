{"status": "resolved", "priority": "bug", "title": "Choice of text editors for \"diff of directories\" mission can cause errors", "milestone": "0.11.06", "superceder": "", "nosylist": ["AFMac, jesstess, palhmbs, paulproteus"], "assigned": "AFMac", "waitingon": "", "keywords": [], "id": "437", "files": [{"url": "http://openhatch.org/bugs/file327/0001-Fix-to-issue-437-with-associated-unit-test-updates.patch", "author": "AFMac"}], "history": [{"message": "AFMac, this is a solid patch. I didn't expect the BOM... of course, who ever does.\n\nYou added some end-of-line whitespace.\n<a href=\"http://sartak.org/2011/03/end-of-line-whitespace-in-vim.html\">http://sartak.org/2011/03/end-of-line-whitespace-in-vim.html</a> provides some\ninformation about this (I can see it in \"git log -p\" since I have git's color\nmode on). I'll permit that to go in, this time, but please try to avoid it in\nthe future.\n\nIt's great that you added a test. The test is quite a reasonable one, and it\npasses. Pusing and deploying!\n\nThis issue is a subtle one that I'm sure stumps many Windows users. I think it's\ngreat that you addressed it.\n   \n", "author": "paulproteus"}, {"message": "Fix and unit test included in the patch.\n   \n", "author": "AFMac"}, {"message": "I've got the fix in place, and from all appearances it works fine.  Before I submit \nthe patch, though, am going to try and add a unit test in accordance with the wiki \nsuggestion for developing new code...that might take a little longer.\n   \n", "author": "AFMac"}, {"message": "Looking more into the file structure, it appears that its potentially a UTF-8 BOM \nproblem.  Specifically:  Windows Notepad add's the BOM, which are then caught via \ndiff.  I still need to run a few files through to test/verify, but am thinking I \ncan add an error handler to catch the BOM characters and throw a response \nsuggesting the use of a different text editor.\n   \n", "author": "AFMac"}, {"message": "Good point, Will!\n\nWe could provide this piece of advice in the error message we send back if you\nprovide a file that is correct except for line endings.\n\nAlternately, we could put it in the mandatory setup instructions (but I'm\nunenthusiastic about burdening users of non-Windows OSs with this instruction).\n\nAnyway, whoever first submits a patch that achieves one of the two (whichever\none) will win the argument. Do-ocracy!\n   \n", "author": "paulproteus"}, {"message": "My wild guess is that it's line ending issues.  If that's the case, we could add\n(assuming it isn't there already) an additional step to setting up the clone:\n\n   $ git config --global core.autocrlf input\n\nor:\n\n   $ git config --global core.autocrlf true\n   \n", "author": "willkahngreene"}, {"message": "We should try to detect some of the crazy chars if there is an error - and give\na better error message.\n   \n", "author": "palhmbs"}, {"message": "In my first run through the \"Aubergine --&gt; Eggplant\" mission, all changes were \nmade via Windows' 'Notepad' app.  Turns out that this introduces some strange \ncharacters once the diff is run, which in turn prevents the user from completing \nthe mission.  See <a href=\"http://pastebin.com/DW1AcMfm,\">http://pastebin.com/DW1AcMfm,</a> line 6 for an example.\n\nWhen changes were made via either Notepad++ or Wordpad, no problems were seen, \nand the mission was passed without issue.  Might be useful to either put a note \nup warning folks away from Notepad, or put some error handling that would notice \nthe wonky characters.\n   \n", "author": "AFMac"}]}