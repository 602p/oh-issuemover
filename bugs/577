{"status": "resolved", "priority": "bug", "title": "Events calendar should let users say their time zone, and adjust the display accordingly", "milestone": "0.11.09", "superceder": "", "nosylist": ["aldeka, jcsims, jessica, paulproteus, tehviking"], "assigned": "", "waitingon": "", "keywords": [], "id": "577", "files": [], "history": [{"message": "I deployed these changes, and they work!\n\nI had to disable caching for now. I did that by doing 'chmod 000' on the cache\ndirectory.\n\nMajor props to Clara for making that a reality!\n   \n", "author": "paulproteus"}, {"message": "Clara took a look at this on Tue Sep 27, and has a mostly-working set \nof changes to Calagator that make it work.\n\n<a href=\"http://lists.openhatch.org/pipermail/devel/2011-September/002399.html\">http://lists.openhatch.org/pipermail/devel/2011-September/002399.html</a> \nhas the current status!\n   \n", "author": "paulproteus"}, {"message": "I aim to work on this during Tue Sep 27.\n   \n", "author": "paulproteus"}, {"message": "(By setting the nosy list, a few people are notified of this bug. Feel free to\nadd/remove people from the nosy list.)\n\nRight now, the events calendar at <a href=\"http://events.openhatch.org/\">http://events.openhatch.org/</a> lists all events\nin UTC. That's because I set the theme time zone to UTC in this commit:\n\n<a href=\"https://github.com/jcsims/calagator/commit/6d1e7a418808f080055bfcb49563caf510cc70ac\">https://github.com/jcsims/calagator/commit/6d1e7a418808f080055bfcb49563caf510cc70ac</a>\n\nThat, and the fact that the Calagator code configures its time zone when it\ninitializes the app: look for \"time zone\" in this file,\n<a href=\"https://github.com/jcsims/calagator/blob/master/config/environment.rb\">https://github.com/jcsims/calagator/blob/master/config/environment.rb</a>\n\nWhat would be best would be if the code:\n\n* accepted a time zone as a parameter in the query string, and also honored a\ntime zone sent to the server in a cookie\n* if the time zone is set that way, the note in the big yellow box at the top of\nthe page should say that time zone\n\nTo detect the user's time zone, we can use this JavaScript code:\n* <a href=\"https://bitbucket.org/pellepim/jstimezonedetect/wiki/Home\">https://bitbucket.org/pellepim/jstimezonedetect/wiki/Home</a>\n\nWe would have to enhance the JS so that it sets a cookie (and also enhance the\nRails backend so it respects that cookie). Then, in the yellow box, we can say\nwhat we think the current time is, so that the user can visually check that we\ndetected things properly.\n\nI'm targeting this for 0.11.09 since it's important, but not a showstopper for\ntoday's 0.11.07 release.\n   \n", "author": "paulproteus"}]}