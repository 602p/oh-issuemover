{"status": "resolved", "priority": "feature", "title": "diff mission gives \"will not apply correctly\" when I think the diff is fine", "milestone": "0.11.01", "superceder": "", "nosylist": ["aldeka, grantbow, paulproteus, stump"], "assigned": "", "waitingon": "", "keywords": [], "id": "128", "files": [{"url": "http://openhatch.org/bugs/file66/broken-diff.diff", "author": "paulproteus"}], "history": [{"message": "We've changed the actual diff mission so it's less confusing. That resolves this \nbug. Thanks to all who helped with that, and to e.g. grantbow for pointing out \nthe confusing nature of the previous mission\n   \n", "author": "paulproteus"}, {"message": "Simply saying \"it works for me\" means we have to go deeper to find the problem, \neven if the problem is \"just the user.\" The point of missions is to teach, \nhelping users. If it fails despite all reasonable attempts something needs to be \nimproved somewhere. Please provide logs or instructions with code so I can try to \nreproduce it on another instance.\n   \n", "author": "grantbow"}, {"message": "I tried it again and it didn't work with and without the blank line.\n   \n", "author": "grantbow"}, {"message": "I did it with and without the blank line.\n   \n", "author": "grantbow"}, {"message": "Grant, the problem with your submission is that you didn't \"remember the \nblank line\", in \"Take this sentence, and copy it underneath itself \n(remember the blank line!).\"\n\nBut the deeper problem is that we don't give you enough hints to succeed. \nThe point of this training mission is *not* to teach people to be \nsticklers about whitespace; that should come later, if at all. (-:\n\nGrant, your idea of showing a diff between the submitted data and what we \nconsider the correct data is a good one. It deserves a separate bug to be \nfiled.\n\n-- Asheesh.\n   \n", "author": "paulproteus"}, {"message": "I am feeling very, very frustrated. Is this the same problem as the svn mission?\n\nWhat is submitted should be diffed against the correct answer after a couple\ntries, don't you think?\n\nerror message: The file resulting from patching does not have the correct contents.\n\nWhat I am pasting that fails:\n\n--- diffsingle.txt\t2012-05-15 13:47:14.056719074 -0700\n+++ diffsingle-modified.txt\t2012-05-15 13:49:21.285534685 -0700\n@@ -1,3 +1,6 @@\n+Move this sentence to at the start of the file, ensuring that it\n+starts on the first line (remember about the blank lines!).\n+\n This mission is to have you make modifications to a file and submit a\n diff of them. The changes may seem a bit silly, but they will cause the\n diff to contain examples of different types of changes - additions,\n@@ -19,15 +22,10 @@\n \n Read this sentence, and leave it alone.\n \n-Nod your head enthusiastically, and then remove this paragraph\n-(being careful to keep just one blank line between the surrounding paragraphs).\n-\n+Take this sentence, and copy it underneath itself (remember the blank line!).\n Take this sentence, and copy it underneath itself (remember the blank line!).\n \n-Move this sentence to at the start of the file, ensuring that it\n-starts on the first line (remember about the blank lines!).\n-\n-There is a typo in this sentence, which oyu should fix.\n+There is a typo in this sentence, which you should fix.\n \n Finally, save your changes in your editor and make a unified diff\n of your changes with the diff command. (If you're not sure how,\n   \n", "author": "grantbow"}, {"message": "The problem here, fwiw, is that aldeka moved (rather than copied) step 6.\n\nI think we should change the mission so that fewer people make these sorts of\nmistakes, but that's a separate bug.\n\nMarking as resolved again for now.\n   \n", "author": "paulproteus"}, {"message": "Diff mission is failing. I suspect it's because of the name of my modified file. In any case, it's \nanother data point.\n\n--- diffsingle.txt\t2011-12-04 12:03:38.000000000 -0800\n+++ diffsingle2.txt\t2011-12-04 12:04:51.000000000 -0800\n@@ -3,26 +3,23 @@\n diff to contain examples of different types of changes - additions,\n deletions, and changes. Here is what we want you to do to this file:\n \n+  0.  Make an exact copy of this step and place it before #1; change the\n+      copy's step number to be 0.\n+\n   1.  Keep an unmodified copy of this file handy; you'll need it to\n       make the diff once you're finished.\n \n+  5.  Move this step so it comes between #1 and #2. (Again, don't\n+      renumber the steps.)\n+\n   2.  Try to keep the formatting intact, as the result file will be\n       compared character-for-character. There is exactly one blank line\n       between each paragraph and bullet point, and all indentation is\n       done with spaces. There is never trailing whitespace.\n \n-  3.  Delete this step (and the blank line below it). (Don't renumber the\n-      ones below it.)\n-\n   4.  Leave this step the way it is.\n \n-  5.  Move this step so it comes between #1 and #2. (Again, don't\n-      renumber the steps.)\n-\n-  6.  Make an exact copy of this step and place it before #1; change the\n-      copy's step number to be 0.\n-\n-  7.  There is a typo in this step, which oyu should fix.\n+  7.  There is a typo in this step, which you should fix.\n \n   8.  Save the changes and make a unified diff of your changes using the\n       diff command. Submit the diff on the page from which you obtained\n   \n", "author": "aldeka"}, {"message": "Well, I tried it with GNU patch and our patch library from Python, and with\nLuke's patch, it actually does *not* apply properly.\n\nSo I'm going to close this as \"resolved\". If someone can come up with a good\ntest case, we can have a new bug.\n   \n", "author": "paulproteus"}, {"message": "quietly deassigning from myself, for now.\n   \n", "author": "paulproteus"}, {"message": "Either this is a bug, or not.\n\nWithin 0.11.01, let's fix it or close the bug.\n   \n", "author": "paulproteus"}, {"message": "When I submit the exact diff that is supplied (Ctl+A, Ctl+C, Ctl+V), I get the\nfollowing error:\n\n\"The file resulting from patching does not have the correct contents.\"\n\nWhen I move the added step 0 to the correct place in the diff then it passes. So\nI don't see any problem here.\n   \n", "author": "pythonian4000"}, {"message": "The attached .diff file is what lfaraone submitted as the answer to \n<a href=\"http://openhatch.org/missions/diffpatch/diffsingle\">http://openhatch.org/missions/diffpatch/diffsingle</a>\n\nAlas, it told him, \"The patch will not apply correctly to the original file.\"\n\nBut I watched him make it! It seemed fine.\n\n(I know that he did the step 0 insertion wrong, but I don't think that's the \nproblem. If it is, then the problem is \"simply\" the error message.)\n   \n", "author": "paulproteus"}]}