{"status": "resolved", "priority": "urgent", "title": "Can't *not* have 'receive maintainer updates' checked for all projects", "milestone": "0.11.07", "superceder": "", "nosylist": ["aldeka, jesstess, paulproteus"], "assigned": "paulproteus", "waitingon": "", "keywords": ["javascript, this-would-rock, usability"], "id": "515", "files": [], "history": [{"message": "This is pushed and deployed. Thanks all that helped find it.\n   \n", "author": "paulproteus"}, {"message": "Karen, your instructions for how to reproduce the bug were hugely helpful.\n\nThe root cause of the problem was that the JavaScript would, in the background,\n1.5 seconds after the project gets saved, refresh all the data on the page from\nthe server. This could easily cause checkboxes to get overwritten.\n\nThe original point of that code was to repeatedly check with the server to see\nif it its search for the icon for the project had finished. I've written the\nJavaScript code that handles that so that it's more precise about only updating\nthe one project for which it is called. \n\nI have this fix on my desktop; will push it in a couple of hours.\n   \n", "author": "paulproteus"}, {"message": "Marking this as 0.11.07 because this is pretty urgent.\n\nI don't know if it'll make it, since there are only four days left, but it would \nbe great.\n\nI will try to tackle it if it gets to August 30 or 31 and it's not done.\n   \n", "author": "paulproteus"}, {"message": "Ah hah. Yeah, this isn't just a usability problem, it's a data-loss bug. That is \nbad news. Increasing priority to 'urgent'.\n   \n", "author": "paulproteus"}, {"message": "That I can reproduce. The culprit is described in the comments for the updatePortfolio function in \nmysite/static/js/importer.js:\n\n\"\"\"\n* Side-effect: Update the page's DOM to display these data.\n* (FIXME: Right now we just add, not \"update\" :-)\n\"\"\"\n\nupdatePortfolio gets called when you save a portfolio entry, and it clobbers the DOM changes you \nmade checking and unchecking those maintainer checkboxes.\n\nI'm removing the bitsized tag since refactoring this is non-trivial.\n   \n", "author": "jesstess"}, {"message": "Weird--it isn't happening quite the same way now. (This is on Chromium on Ubuntu.) \nNow I can uncheck a box, and save it. When I uncheck multiple boxes, then hit save \non only one project, the other projects' maintainer updates boxes revert to \nchecked. Which project you start with doesn't appear to matter.\n   \n", "author": "aldeka"}, {"message": "I'm not able to reproduce this in Chrome, Firefox, or Safari. What browser are you using, and does this \nhappen with every project listed in your portfolio?\n   \n", "author": "jesstess"}, {"message": "When I go to <a href=\"http://openhatch.org/+portfolio/editor/,\">http://openhatch.org/+portfolio/editor/,</a> the 'receive maintainer \nupdates' checkbox is checked for all of the projects I have listed there. If I \nuncheck the box, it re-checks itself a second later, before I can hit save. It \ndoes this over and over again! SO FRUSTRATING AAAAAAUGH\n\nIt does this whether or not you are currently in the process of importing stuff \nautomatically.\n\nLooks like I'm getting maintainer updates, whether I want to or not. :P\n\nI assume there's some bug in the JavaScript that is doing this. If there's a \nperson out there who's willing to dig through our JS code and fix this, that \nwould be totally awesome!\n   \n", "author": "aldeka"}]}