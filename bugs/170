{"status": "resolved", "priority": "feature", "title": "Move the missions code around so that each mission is in its own directory", "milestone": "0.10.11", "superceder": "", "nosylist": ["paulproteus, pythonian4000, stump"], "assigned": "pythonian4000", "waitingon": "", "keywords": [], "id": "170", "files": [], "history": [{"message": "The patch doesn't pass all the missions tests. It fails because of a partial\nrename for SvnDiffMission into DiffMission.\n\nI added a commit on top of that.\n\nIt looks good. Committed and pushed to origin/master.\n\nThe next thing we should do is to clean these up so there's a consistent coding\nstyle used in the missions. But that's a separate ticket. (<a href=\"issue179\">issue179</a>)\n\nThanks, Jack!\n   \n", "author": "paulproteus"}, {"message": "Renaming is done. Here are the relevant patches:\n\n<a href=\"http://git.jackgrigg.com/openhatch/patch/?id=a5da7e069fbef5f9e19a20179ff0a437880ca218\">http://git.jackgrigg.com/openhatch/patch/?id=a5da7e069fbef5f9e19a20179ff0a437880ca218</a>\n<a href=\"http://git.jackgrigg.com/openhatch/patch/?id=507b21ec4dba24e63d7db07f94ed8c64e4624f32\">http://git.jackgrigg.com/openhatch/patch/?id=507b21ec4dba24e63d7db07f94ed8c64e4624f32</a>\n   \n", "author": "pythonian4000"}, {"message": "I did think this myself actually! I will go through and do some renaming.\n   \n", "author": "pythonian4000"}, {"message": "There's a little bit of ugliness left here. For example, the tar mission's views\nstill contain \"tar_\" in the function names, even though it's quite obvious that\nthey're tar-related because they're in a module named \"tar\". Same goes for the\ntemplates; they start with \"tar_\" even though they're in a \"tar\" directory.\n\nStill, it's really great that you've done this much clean-up. I think that the\nsimplicity you're creating will really help us write a clear \"Write your own\nmission HOWTO\". Also, sorry that I wasn't on IRC when you were trying to find me!\n\nI've merged what you have, and pushed it to Gitorious. (I used cherry-pick so I\ngot linear history; you might want to rebase against Gitorious's origin/master.)\n\nWhat do you think about doing the remaining template and view name changes?\n   \n", "author": "paulproteus"}, {"message": "All done. See the following patches:\n\n<a href=\"http://git.jackgrigg.com/openhatch/patch/?id=3488dc63ca25e0aff8c172ed222cf8fc666fc815\">http://git.jackgrigg.com/openhatch/patch/?id=3488dc63ca25e0aff8c172ed222cf8fc666fc815</a>\n<a href=\"http://git.jackgrigg.com/openhatch/patch/?id=79d86ca8a2cb5f978cb30f290e244c53abbdaac6\">http://git.jackgrigg.com/openhatch/patch/?id=79d86ca8a2cb5f978cb30f290e244c53abbdaac6</a>\n<a href=\"http://git.jackgrigg.com/openhatch/patch/?id=473ec3813c65697495a7c5407864764f503dcf29\">http://git.jackgrigg.com/openhatch/patch/?id=473ec3813c65697495a7c5407864764f503dcf29</a>\n   \n", "author": "pythonian4000"}, {"message": "I agree with both your suggestions - templates should be in missions for\norganizational niceties, and I think that using fully-namespaced names should\nspeed things up a bit as Django won't be loading the views.py files for *every*\nmission, just the one it needs. I will do those next.\n   \n", "author": "pythonian4000"}, {"message": "I have some more feedback on this. I like what you've done, and I've pushed it.\nCan you take it a little further?\n\nI removed your missions/base/forms.py file, since it did not have any extra\ncontent beyond what Django provides.\n\nI think that it would be nice if mysite/missions/views.py were empty, and we\nused fully-namespaced names in mysite/urls.py for each module's views. Then\n'mysite/missions/views.py' would only contain the landing page with information\nabout missions.\n\nI also think that we should move the mission-specific templates into their own\ndirectory.\n\nWhat do you think? (And thanks for tackling this so far)!\n   \n", "author": "paulproteus"}, {"message": "Finished moving the missions code around, and ran the missions tests\nsuccessfully on the result.\n\nPatch is at\n<a href=\"http://git.jackgrigg.com/openhatch/patch/?id=6851a669cff147291db02da232aab1270b1da164\">http://git.jackgrigg.com/openhatch/patch/?id=6851a669cff147291db02da232aab1270b1da164</a>\n   \n", "author": "pythonian4000"}, {"message": "&lt;pythonian4000&gt; I have had a brief look through the missions code. Howw feasible\nwould it be to move sections in views.py, controllers.py etc. into their own files?\n&lt;paulproteuss&gt; mllerustad, Right, exactly. I agree!\n&lt;paulproteuss&gt; pythonian4000, One thing I was thinking was, one directory per\nmission.\n&lt;pythonian4000&gt; (i.e. under \"views\" dir, and have views.py do some including magic)\n&lt;paulproteuss&gt; Then \"views.py\" can just be a list of:\n&lt;paulproteuss&gt; from svn_mission.views import *\n&lt;paulproteuss&gt; from diff_patch_mission.views import *\n&lt;paulproteuss&gt; And that way, each mission is nice and self-contained.\n&lt;pythonian4000&gt; that does make more sense than views.svn_missions etc.\n&lt;paulproteuss&gt; er, oops\n&lt;paulproteuss&gt; er, un-oops\n&lt;pythonian4000&gt; =)\n&lt;paulproteuss&gt; Yeah, I think that makes the most sense.\n&lt;paulproteuss&gt; It requires some upheaval and moving stuff around in the codebase.\n&lt;pythonian4000&gt; But that's just copy-paste, right?\n&lt;paulproteuss&gt; Basically.\n&lt;paulproteuss&gt; I would really like someone else to take that on. I don't think\nit'll be that hard, and I think that once they're separated out like that, it'll\nbe easy for that person to begin writing the HOWTO, too.\n   \n", "author": "paulproteus"}]}