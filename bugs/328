{"status": "resolved", "priority": "bug", "title": "Projects should have separate URL/identifying and display names", "milestone": "0.11.03", "superceder": "", "nosylist": ["paulproteus, pythonian4000"], "assigned": "pythonian4000", "waitingon": "", "keywords": [], "id": "328", "files": [], "history": [{"message": "Yup, Hudson loved it. Will deploy along with some other changes shortly.\n   \n", "author": "paulproteus"}, {"message": "I think Hudson was happy. Can you confirm?\n   \n", "author": "pythonian4000"}, {"message": "Pushed; will deploy pending Hudson being happy!\n   \n", "author": "paulproteus"}, {"message": "Hudson failed; here is a patch to fix it.\n<a href=\"http://git.jackgrigg.com/openhatch/patch/?id=3861719983f685f6ac88df0dfc1a6078aa7c40da\">http://git.jackgrigg.com/openhatch/patch/?id=3861719983f685f6ac88df0dfc1a6078aa7c40da</a>\n   \n", "author": "pythonian4000"}, {"message": "Pushed; awaiting Hudson's results.\n   \n", "author": "paulproteus"}, {"message": "Done. New patch links in place of the old ones (because I was rebasing):\n<a href=\"http://git.jackgrigg.com/openhatch/patch/?id=76a5924a1475681651e254012a15ef115c509ce9\">http://git.jackgrigg.com/openhatch/patch/?id=76a5924a1475681651e254012a15ef115c509ce9</a>\n<a href=\"http://git.jackgrigg.com/openhatch/patch/?id=a3980ca23a27b42d80dec69031bd53cb4b5c48be\">http://git.jackgrigg.com/openhatch/patch/?id=a3980ca23a27b42d80dec69031bd53cb4b5c48be</a>\n   \n", "author": "pythonian4000"}, {"message": "The first patch should have a data migration. See\n<a href=\"http://south.aeracode.org/docs/tutorial/part3.html\">http://south.aeracode.org/docs/tutorial/part3.html</a> and read the section\nbeginning, \"Now, the second migration is more interesting\".\n\nYou should copy over the trivial project save logic into the migration:\n\nfor project in orm.Project.objects.all():\n   if not project.display_name:\n       project.display_name = project.other_field\n       project.save()\n(as a rough sketch)\n\nOther than that, these look good. They took me a while to understand.\n\nThe /search/ stuff in views.py and controllers.py looks okay to me; that's just\nuser-facing stuff.\n\nIf the test pass once you resubmit, I'll push and deploy.\n   \n", "author": "paulproteus"}, {"message": "Done:\n<a href=\"http://git.jackgrigg.com/openhatch/patch/?id=d2054956f629e321a0748def548304b47532b752\">http://git.jackgrigg.com/openhatch/patch/?id=d2054956f629e321a0748def548304b47532b752</a>\n<a href=\"http://git.jackgrigg.com/openhatch/patch/?id=992b36627a3465615811ef3ca6967d47a86fb5e9\">http://git.jackgrigg.com/openhatch/patch/?id=992b36627a3465615811ef3ca6967d47a86fb5e9</a>\n\nAfter applying the first patch, run the following in \"./bin/mysite shell_plus\":\n\nfor project in Project.objects.all()\n    project.save()\n\nThat will set the display_name field for all Projects to be the same as the name\nfield rather than blank, so that when the second patch is applied /search/\ndoesn't fail because every project has the same display_name of ''.\n\nAlso, see my comments in the second patch. I am not sure if this is a problem or\nnot - in some ways it seems better, and in others worse. But I really don't know\nthe search code, so I am really placed to say much.\n   \n", "author": "pythonian4000"}, {"message": "I'll get this done alongside <a href=\"issue260\">issue260</a>.\n   \n", "author": "pythonian4000"}, {"message": "&lt;paulproteus&gt; pythonian4000: I'll do the first rename if you file a bug pointing\nout that projects probably need a \"URL name\" and a \"Display name\"\n* paulproteus does 'em both right now\n&lt;pythonian4000&gt; Alrighty\n&lt;paulproteus&gt; Done on my end!\n&lt;pythonian4000&gt; paulproteus, should the project URL still use the project name?\n&lt;paulproteus&gt; I would think it should use a simplified version, just like what\nohloh.net does.\n&lt;paulproteus&gt; Like a WordPress blog post, projects should have a \"slug\"\n(URL-safe name) and a \"title\" (long, flowery thing)\n&lt;paulproteus&gt; e.g. \"debian\" and \"Debian GNU/Linux\"\n&lt;paulproteus&gt; That's what I'm thinkinkg\n&lt;pythonian4000&gt; Well the way OpenHatch handles URLs, pretty much anything is\nURL-safe, like unescaped spaces\n&lt;paulproteus&gt; It's true, but for e.g. copy-pasting. Well it's just one idea; we\ncan discuss it later (-:\n&lt;paulproteus&gt; The reason, though, is that when we import projects from far away,\nwe're not consistent about if we use the URL-name or the project name, from the\nremote service.\n&lt;paulproteus&gt; Plus re-titling projects, this way, could be done without breaking\nURLs, so we could make it part of the project edit interface.\n&lt;paulproteus&gt; +projedit/\n&lt;pythonian4000&gt; So the current Project name becomes the URL name and Display\nname will be what appears in strings (and can maybe default to the same as the\nURL one)\n&lt;paulproteus&gt; Yeah, I think that's the best way to do it.\n&lt;pythonian4000&gt; We will just need to make sure it integrates properly with the\nbug importing stuff - since the projects currently use names rather than Foreign\nkeys to link, they will need to be checked.\n&lt;pythonian4000&gt; cf. <a href=\"issue161\">issue161</a>\n   \n", "author": "pythonian4000"}]}